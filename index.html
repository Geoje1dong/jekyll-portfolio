---
layout: home
title: Home
---
<div id="work-list">
	<div id="scrolling" class="clearfix" style="width:100vw;">
	</div>
</div>

<div id="work-content">
	<div class="content_box"></div>
	<button onClick="contentClose();">닫기</button>
</div>

<script src="{{ site.asset_url }}/lib/jquery-1.12.0.min.js"></script>
<script>
  $(document).ready(function(){
    $.ajax({
      url : "{{ site.work_url }}/test.json",
      dataType : "json",
      success : function(data){
        var card_wrap = $('#scrolling');
        var show = "";
        $.each(data,function(index, item){
						show += '<div class="card">';
						show += '	<button class="thumb" onClick=abs('+(index+1)+'); style="background-image:url({{ site.img_url }}/'+item.work_img+');">';
						show += '		<div class="info">';
						show += '			<div class="name">';
						show += '				<h3>'+item.tit+'</h3>';
						show += '				<p>'+item.cnt+'</p>';
						show += '			</div>';
						show += '		</div>';
						show += '	</button>';
						show += '</div>';
        });
        card_wrap.append(show);
				cardWidth();
      },
    });
		scrolling();
  });


  function abs(listNumber){
  	$.ajax({
      url : "{{ site.work_url }}/work"+listNumber+".html",
      dataType : "html",
      success : function(data){
        alert('list'+listNumber);
        $('#work-content>.content_box').append(data);
			  $('#work-content').addClass('active');
      }
    });
  };
  function contentClose(){
	  $('#work-content').removeClass('active');
	  $('#work-content>.content_box').empty();
  }

	let totalCard;
	let widthCard;
	let scrollingTarget = document.getElementById('scrolling')
	let horizontalWidth  = 0;
	let scrollStop = true;
	let scrollLeft = 0;

	function cardWidth(){
		totalCard = $('.card').length;
		widthCard = $('.card').outerWidth();
		horizontalWidth = widthCard*totalCard;
		scrollingTarget.style.width = horizontalWidth+ 'px';
	}




	function scrolling(){
		totalCard = $('.card').length;
		widthCard = $('.card').outerWidth();

		$('html, body').on('mousewheel DOMMouseScroll', function(event){
			let wheelData = event.originalEvent;
			delta = 0;
			if(wheelData.detail){
				delta = wheelData.detail *- 40;
			}else{
				delta = wheelData.wheelDelta;
			}
			console.log(scrollLeft+', '+totalCard+', '+widthCard+', '+scrollStop);
			if(delta < 0 && scrollLeft > (totalCard-7)*-widthCard && scrollStop){
				// 마우스 휠을 아래로 내렸을 경우
				scrollStop = false;
				setTranslate(scrollLeft += -widthCard, scrollingTarget)
			};
			if(delta > 0 && scrollLeft < 0 && scrollStop){
				// 마우스 휠을 위로 올렸을 경우
				scrollStop = false;
				setTranslate(scrollLeft += widthCard, scrollingTarget)
			};
		});
	}

	function setTranslate(xPos, el){
		scrollLeft = parseInt(xPos);
		el.style.left = `${xPos}px`;
		scrollStop = true;
	}
</script>
