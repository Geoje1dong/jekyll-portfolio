---
layout: home
title: Home
---
<div id="work-list">
	<div id="scrolling" class="clearfix" style="width:100vw;">
	</div>
</div>

<div id="work-content">
	<div class="content_box"></div>
	<button onClick="contentClose();">닫기</button>
</div>

<script src="{{ site.asset_url }}/lib/jquery-1.12.0.min.js"></script>
<script>
  $(document).ready(function(){
    $.ajax({
      url : "{{ site.work_url }}/test.json",
      dataType : "json",
      success : function(data){
        var card_wrap = $('#scrolling');
        var show = "";
        $.each(data,function(index, item){
						show += '<div class="card">';
						show += '	<button class="thumb" onClick=abs('+(index+1)+'); style="background-image:url({{ site.img_url }}/'+item.work_img+');">';
						show += '		<div class="info">';
						show += '			<div class="name">';
						show += '				<h3>'+item.tit+'</h3>';
						show += '				<p>'+item.cnt+'</p>';
						show += '			</div>';
						show += '		</div>';
						show += '	</button>';
						show += '</div>';
        });
        card_wrap.append(show);
				cardWidth();
      },
    });
		Scrolling();
  });


  function abs(listNumber){
  	$.ajax({
      url : "{{ site.work_url }}/work"+listNumber+".html",
      dataType : "html",
      success : function(data){
        alert('list'+listNumber);
        $('#work-content>.content_box').append(data);
			  $('#work-content').addClass('active');
      }
    });
  };
  function contentClose(){
	  $('#work-content').removeClass('active');
	  $('#work-content>.content_box').empty();
  }


	let scrollingTarget = document.getElementById('scrolling')
	let scrollPostion = 0;
	let horizontalWidth  = 0;
	function cardWidth(){
		let totalCard = $('.card').length;
		let widthCard = $('.card').outerWidth();
		horizontalWidth = widthCard*totalCard;
		scrollingTarget.style.width = horizontalWidth+ 'px';
	}
	function Scrolling(){

		if(scrollPostion > 120){
			scrollPostion = 0;
			console.log('a');
		}else if(scrollPostion < -horizontalWidth-120){
			scrollPostion = -horizontalWidth - 240;
			console.log('b');
		}else{
			$(window).bind('mousewheel', function(event) {
				scrollPostion += event.originalEvent.wheelDelta;
				setTranslate(scrollPostion, scrollingTarget)
				console.log('c');
			});
		}
	}

	function setTranslate(xPos, el){
		el.style.transform = `translate3d(${xPos}px, 0, 0)`;
		if(xPos > 1){
			xPos = 1;
		}else if(xPos < -horizontalWidth){
			xPos = -horizontalWidth;
		}
		//console.log(xPos);
	}
</script>
