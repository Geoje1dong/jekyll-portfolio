<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no"/>
<title></title>
<meta name="title" content="" />
<meta name="author" content=""/>
<meta name="description" content=""/>
<link rel="stylesheet" href="/assets/css/style.css">

</head>
<body class="home-template">

<div id="header">
    <!-- <button id="menu-toggle" type="button">
        <span class="sr-only">Toggle Navigation Menu</span>
    </button>
    <button id="search-toggle" type="button">
        <span class="sr-only">Toggle Search Form</span>
    </button> -->
    <a id="logo" href="/">
        <span class="sr-only">Logo how</span>
    </a>
    <!-- <div id="search">
        <input id="search-input" type="search" placeholder="Search..." value="" />
    </div> -->
    <ul class="search__results" id="results-container"></ul>
    <ul id="menu" class="nav clearfix">
        <li class=" active "><a href="/">Work</a></li>
        <li class=""><a href="/blog/">Blog</a></li>
        <li class=""><a href="/about/">About</a></li>
    </ul>
</div>
<!-- Script pointing to jekyll-search.js -->
<!-- <script src="/dest/jekyll-search.js" type="text/javascript"></script> -->

<!-- <script type="text/javascript">
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: '/search2.json',
        searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
        noResultsText: '<li>No results found</li>',
        limit: 15,
        fuzzy: false,
        exclude: ['Welcome']
    })
</script><!-- #header -->


<div id="wrapper">
    <div id="mainContentWrap">
  <div id="mainContent">
    <div class="introBox">
      <!-- <p>안녕하세요.</p>
      <p>UI UX 디자이너 <strong>김재현</strong> 입니다.</p>
      <p>저의 <strong>포트폴리오</strong>에 오신것을 환영합니다.</p> -->
      <p>가로 스크롤 공부</p>
    </div>
  </div>
  <div class="workBox">
    <div id="work-list">
	<div id="scrolling" class="clearfix" style="width:100vw;">
	</div>
</div>

<div id="work-content">
	<div class="content_box"></div>
	<button onClick="contentClose();">닫기</button>
</div>

<script src="/assets/lib/jquery-1.12.0.min.js"></script>
<script>
  $(document).ready(function(){
    $.ajax({
      url : "/work/test.json",
      dataType : "json",
      success : function(data){
        var card_wrap = $('#scrolling');
        var show = "";
        $.each(data,function(index, item){
						show += '<div class="card">';
						show += '	<button class="thumb" onClick=abs('+(index+1)+'); style="background-image:url(/assets/images/'+item.work_img+');">';
						show += '		<div class="info">';
						show += '			<div class="name">';
						show += '				<h3>'+item.tit+'</h3>';
						show += '				<p>'+item.cnt+'</p>';
						show += '			</div>';
						show += '		</div>';
						show += '	</button>';
						show += '</div>';
        });
        card_wrap.append(show);
				cardWidth();
      },
    });
		scrolling();
  });


  function abs(listNumber){
  	$.ajax({
      url : "/work/work"+listNumber+".html",
      dataType : "html",
      success : function(data){
        alert('list'+listNumber);
        $('#work-content>.content_box').append(data);
			  $('#work-content').addClass('active');
      }
    });
  };
  function contentClose(){
	  $('#work-content').removeClass('active');
	  $('#work-content>.content_box').empty();
  }

	let totalCard;
	let widthCard;
	let scrollingTarget = document.getElementById('scrolling')
	let horizontalWidth  = 0;
	let scrollStop = true;
	let scrollLeft = 0;

	function cardWidth(){
		totalCard = $('.card').length;
		widthCard = $('.card').outerWidth();
		horizontalWidth = widthCard*totalCard;
		scrollingTarget.style.width = horizontalWidth+ 'px';
	}




	function scrolling(){
		totalCard = $('.card').length;
		widthCard = $('.card').outerWidth();

		$('html, body').on('mousewheel DOMMouseScroll', function(event){
			let wheelData = event.originalEvent;
			delta = 0;
			if(wheelData.detail){
				delta = wheelData.detail *- 40;
			}else{
				delta = wheelData.wheelDelta;
			}
			console.log(scrollLeft+', '+totalCard+', '+widthCard+', '+scrollStop);
			if(delta < 0 && scrollLeft > (totalCard-7)*-widthCard && scrollStop){
				// 마우스 휠을 아래로 내렸을 경우
				scrollStop = false;
				setTranslate(scrollLeft += -widthCard, scrollingTarget)
			};
			if(delta > 0 && scrollLeft < 0 && scrollStop){
				// 마우스 휠을 위로 올렸을 경우
				scrollStop = false;
				setTranslate(scrollLeft += widthCard, scrollingTarget)
			};
		});
	}

	function setTranslate(xPos, el){
		scrollLeft = parseInt(xPos);
		el.style.left = `${xPos}px`;
		scrollStop = true;
	}
</script>

  </div>
</div>


    <div class="clearfix"></div>

    <a href="#" id="back-to-top"></a>
</div>

<div id="footer" class="container-fluid">
    <ul id="links">
        
        
        
        <li>
            <a id="link-rss" href="/rss" target="_blank">
                <span class="sr-only">rss</span>
            </a>
        </li>
    </ul>
    <ul id="footer-menu">
        <li><a href="//www.kakaocorp.com">Kakao</a></li>
        <li><a href="//careers.kakao.com/jobs">Jobs</a></li>
        <li><a href="//privacy.kakaocorp.com">Privacy</a></li>
    </ul>
    <p id="copyright">
        <a href="//www.kakaocorp.com">Copyright &copy; Kakao Corp.</a>
        All rights reserved.
    </p>
</div><!--#footer-->


<script src="/assets/lib/jquery-1.12.0.min.js"></script>
<script src="/assets/lib/jquery.magnific-popup.min.js"></script>
<script src="/assets/js/index.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</body>
</html>
